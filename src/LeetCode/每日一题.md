---
title: 每日一题
order: 3
---

## 1797. 设计一个验证系统

[1797. 设计一个验证系统](https://leetcode.cn/problems/design-authentication-manager/)

```ts
class AuthenticationManager {
  private timeToLive = 0;
  private tokenMap: Record<string, number> = {};

  constructor(timeToLive: number) {
    this.timeToLive = timeToLive;
  }

  generate(tokenId: string, currentTime: number): void {
    this.tokenMap[tokenId] = currentTime;
  }

  renew(tokenId: string, currentTime: number): void {
    if (!this.tokenMap[tokenId]) return;
    if (this.tokenMap[tokenId] + this.timeToLive > currentTime) {
      this.tokenMap[tokenId] = currentTime;
    }
  }

  countUnexpiredTokens(currentTime: number): number {
    return Object.values(this.tokenMap).filter((item) => item + this.timeToLive > currentTime)
      .length;
  }
}
```

## 1223. 掷骰子模拟

[1223. 掷骰子模拟](https://leetcode.cn/problems/dice-roll-simulation/)

```ts
let mod = 1e9 + 7;
function dieSimulator(n: number, rollMax: number[]): number {
  let dp = new Array(n).fill(0).map(() => new Array(6).fill(0));
  let sum = new Array(n).fill(0);
  dp[0].fill(1);
  for (let i = 1; i < n; i++) {
    sum[i - 1] = dp[i - 1].reduce((pre, cur) => pre + cur, 0) % mod;
    for (let j = 0; j < 6; j++) {
      dp[i][j] = sum[i - 1];
      let k = i - rollMax[j];
      if (k - 1 >= 0) {
        dp[i][j] = (dp[i][j] - (sum[k - 1] - dp[k - 1][j]) + mod) % mod;
      } else if (k >= 0) {
        dp[i][j] -= 1;
      }
    }
  }

  return dp[n - 1].reduce((pre, cur) => pre + cur, 0) % mod;
}
```

```tsx
import React from 'react';
import { LearnNote } from 'learn-note';

export default () => <LearnNote />;
```
